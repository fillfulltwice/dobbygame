// js/data/translations.js
export const TRANSLATIONS = {
    ru: {
        game: {
            title: 'ðŸ• Dobby\'s Absurd Alchemy',
            subtitle: 'Ð¡Ð¾Ð·Ð´Ð°Ð²Ð°Ð¹ Ð½ÐµÐ²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾Ðµ Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒÑŽ Ð±ÐµÐ·ÑƒÐ¼Ð½Ð¾Ð³Ð¾ AI-Ð°Ð»Ñ…Ð¸Ð¼Ð¸ÐºÐ°!',
            powered_by: 'ÐÐ° Ð±Ð°Ð·Ðµ Sentient AI: dobby-unhinged-llama-3-3-70b'
        },
        
        stats: {
            level: 'ðŸŽ­ Ð£Ñ€Ð¾Ð²ÐµÐ½ÑŒ',
            exp: 'â­ ÐžÐ¿Ñ‹Ñ‚',
            coins: 'ðŸª™ ÐœÐ¾Ð½ÐµÑ‚Ñ‹',
            elements: 'ðŸ”® Ð­Ð»ÐµÐ¼ÐµÐ½Ñ‚Ñ‹',
            meat: 'ðŸ– ÐœÑÑÐ¾',
            bones: 'ðŸ¦´ ÐšÐ¾ÑÑ‚Ð¸'
        },
        
        tabs: {
            game: 'ðŸŽ® Ð˜Ð³Ñ€Ð°',
            shop: 'ðŸª Dobby Shop',
            tree: 'ðŸŒ³ Ð”Ñ€ÐµÐ²Ð¾ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð¾Ð²',
            leaderboard: 'ðŸ† Ð›Ð¸Ð´ÐµÑ€Ð±Ð¾Ñ€Ð´',
            settings: 'âš™ï¸ ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸'
        },
        
        panels: {
            inventory: 'ðŸ“¦ Ð˜Ð½Ð²ÐµÐ½Ñ‚Ð°Ñ€ÑŒ',
            dobby: 'ðŸ• Dobby AI Assistant',
            crafting: 'ðŸ”¨ ÐœÐ°ÑÑ‚ÐµÑ€ÑÐºÐ°Ñ Ð°Ð±ÑÑƒÑ€Ð´Ð°',
            shop_title: 'ðŸª Dobby Shop - ÐœÐ°Ð³Ð°Ð·Ð¸Ð½ Ð±ÐµÐ·ÑƒÐ¼Ð¸Ñ',
            your_coins: 'Ð¢Ð²Ð¾Ð¸ Ð¼Ð¾Ð½ÐµÑ‚Ñ‹:'
        },
        
        dobby: {
            loyalty: 'Ð›Ð¾ÑÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ',
            trust: 'Ð”Ð¾Ð²ÐµÑ€Ð¸Ðµ',
            chat_placeholder: 'ÐŸÐ¾Ð³Ð¾Ð²Ð¾Ñ€Ð¸ Ñ Dobby... (Enter Ð´Ð»Ñ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐ¸)',
            chat_button: 'ðŸ’¬ Ð¡ÐºÐ°Ð·Ð°Ñ‚ÑŒ Dobby',
            give_meat: 'ðŸ– Ð”Ð°Ñ‚ÑŒ Ð¼ÑÑÐ¾',
            give_bone: 'ðŸ¦´ Ð”Ð°Ñ‚ÑŒ ÐºÐ¾ÑÑ‚ÑŒ',
            thinking: 'Dobby Ð´ÑƒÐ¼Ð°ÐµÑ‚...',
            sniffing: 'Dobby Ð¾Ð±Ð½ÑŽÑ…Ð¸Ð²Ð°ÐµÑ‚ Ñ‚Ð²Ð¾Ð¸ ÑÐ»Ð¾Ð²Ð°...',
            complete_request: 'Ð’Ñ‹Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÑŒ',
            
            greetings: {
                new_player: 'Ð“Ð°Ð²! ÐŸÑ€Ð¸Ð²ÐµÑ‚, {name}! Ð¯ Dobby - ÑÐ°Ð¼Ñ‹Ð¹ Ð±ÐµÐ·ÑƒÐ¼Ð½Ñ‹Ð¹ Ð°Ð»Ñ…Ð¸Ð¼Ð¸Ðº-Ð¿Ñ‘Ñ Ð²Ð¾ Ð²ÑÐµÐ»ÐµÐ½Ð½Ð¾Ð¹! ðŸ•\n\nÐ¯ Ð·Ð½Ð°ÑŽ Ñ€ÐµÑ†ÐµÐ¿Ñ‚Ñ‹ Ñ‚Ð°ÐºÐ¸Ñ… Ð²ÐµÑ‰ÐµÐ¹, Ð¾Ñ‚ ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ñ… Ñƒ Ð¾Ð±Ñ‹Ñ‡Ð½Ñ‹Ñ… Ð°Ð»Ñ…Ð¸Ð¼Ð¸ÐºÐ¾Ð² Ð³Ð¾Ð»Ð¾Ð²Ð° ÐºÑ€ÑƒÐ³Ð¾Ð¼ Ð¿Ð¾Ð¹Ð´Ñ‘Ñ‚! ÐÐ¾ ÑÐ½Ð°Ñ‡Ð°Ð»Ð° Ð¼Ð½Ðµ Ð½ÑƒÐ¶Ð½Ð¾ ÑƒÐ·Ð½Ð°Ñ‚ÑŒ, Ð¼Ð¾Ð¶Ð½Ð¾ Ð»Ð¸ Ñ‚ÐµÐ±Ðµ Ð´Ð¾Ð²ÐµÑ€ÑÑ‚ÑŒ...',
                returning: 'Ð“Ð°Ð²! {name}, Ñ‚Ñ‹ Ð²ÐµÑ€Ð½ÑƒÐ»ÑÑ! Ð¯ ÑÐºÑƒÑ‡Ð°Ð»! ðŸ•',
                first_time: 'Ð“Ð°Ð²! Ð¯ Dobby! ðŸ• Ð¯ Ð·Ð½Ð°ÑŽ Ð²ÑÐµ ÑÐµÐºÑ€ÐµÑ‚Ñ‹ Ð°Ð»Ñ…Ð¸Ð¼Ð¸Ð¸... Ð½Ð¾ ÑÐ½Ð°Ñ‡Ð°Ð»Ð° Ð´Ð°Ð²Ð°Ð¹ Ð¿Ð¾Ð·Ð½Ð°ÐºÐ¾Ð¼Ð¸Ð¼ÑÑ!'
            },
            
            moods: {
                happy: 'Dobby ÑÑ‡Ð°ÑÑ‚Ð»Ð¸Ð²! *Ð²Ð¸Ð»ÑÐµÑ‚ Ñ…Ð²Ð¾ÑÑ‚Ð¾Ð¼*',
                neutral: 'Ð“Ð°Ð²... Ñ‡Ñ‚Ð¾ Ñ‚ÐµÐ±Ðµ Ð½ÑƒÐ¶Ð½Ð¾?',
                angry: 'Ð“Ñ€Ñ€Ñ€Ñ€... Dobby Ð½Ðµ Ð´Ð¾Ð²Ð¾Ð»ÐµÐ½!',
                loving: 'Ð¢Ñ‹ Ð¼Ð¾Ð¹ Ð»ÑƒÑ‡ÑˆÐ¸Ð¹ Ð´Ñ€ÑƒÐ³! ðŸ¥°'
            },
            
            requests: [
                'ÐŸÑ€Ð¸Ð½ÐµÑÐ¸ Ð¼Ð½Ðµ 2 ÐžÐ³Ð½Ñ, Ð¸ Ñ Ñ€Ð°ÑÑÐºÐ°Ð¶Ñƒ ÑÐµÐºÑ€ÐµÑ‚ ÐŸÐ°Ñ€Ð°!',
                'ÐœÐ½Ðµ Ð½ÑƒÐ¶Ð½Ñ‹ 3 Ð’Ð¾Ð´Ñ‹ Ð´Ð»Ñ ÐºÑƒÐ¿Ð°Ð½Ð¸Ñ! Ð”Ð°ÑˆÑŒ - Ñ€Ð°ÑÑÐºÐ°Ð¶Ñƒ Ð¿Ñ€Ð¾ Ð›Ñ‘Ð´!',
                'Ð¥Ð¾Ñ‡Ñƒ Ð¡Ð¼ÐµÑ…! ÐŸÑ€Ð¸Ð½ÐµÑÐ¸, Ð¸ ÑƒÐ·Ð½Ð°ÐµÑˆÑŒ Ð¿Ñ€Ð¾ Ð—Ð¾Ð»Ð¾Ñ‚Ð¾!',
                'Ð”Ð°Ð¹ Ð¼Ð½Ðµ Ð¯Ð¹Ñ†Ð¾, Ñ€Ð°ÑÑÐºÐ°Ð¶Ñƒ Ð¿Ñ€Ð¾ Ð´Ñ€Ð°ÐºÐ¾Ð½Ð¾Ð²!'
            ]
        },
        
        crafting: {
            mix_button: 'âœ¨ Ð¡Ð¼ÐµÑˆÐ°Ñ‚ÑŒ Ð±ÐµÐ·ÑƒÐ¼Ð¸Ðµ âœ¨',
            min_elements: 'ÐÑƒÐ¶Ð½Ð¾ Ð¼Ð¸Ð½Ð¸Ð¼ÑƒÐ¼ 2 ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚Ð°!',
            recipe_not_found: 'âŒ Ð ÐµÑ†ÐµÐ¿Ñ‚ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½! Ð¡Ð¿Ñ€Ð¾ÑÐ¸ Ñƒ Dobby!',
            success: 'âœ¨ Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¾: {element}! âœ¨',
            failed: 'Ð­Ñ‚Ð° ÐºÐ¾Ð¼Ð±Ð¸Ð½Ð°Ñ†Ð¸Ñ Ð½Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚... ÐœÐ¾Ð¶ÐµÑ‚ Dobby Ð·Ð½Ð°ÐµÑ‚ ÑÐµÐºÑ€ÐµÑ‚?'
        },
        
        shop: {
            buy_button: 'ÐšÑƒÐ¿Ð¸Ñ‚ÑŒ',
            not_enough_coins: 'ÐÐµÐ´Ð¾ÑÑ‚Ð°Ñ‚Ð¾Ñ‡Ð½Ð¾ Ð¼Ð¾Ð½ÐµÑ‚!',
            purchased: 'ÐšÑƒÐ¿Ð»ÐµÐ½Ð¾: {item}!'
        },
        
        modals: {
            welcome: {
                title: 'ðŸ• Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ!',
                subtitle: 'ÐšÐ°Ðº Ñ‚ÐµÐ±Ñ Ð·Ð¾Ð²ÑƒÑ‚, ÑŽÐ½Ñ‹Ð¹ Ð°Ð»Ñ…Ð¸Ð¼Ð¸Ðº?',
                name_placeholder: 'Ð’Ð²ÐµÐ´Ð¸ ÑÐ²Ð¾Ñ‘ Ð¸Ð¼Ñ',
                start_button: 'ÐÐ°Ñ‡Ð°Ñ‚ÑŒ Ð¿Ñ€Ð¸ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ!'
            },
            
            unlock: {
                title: 'ðŸŽ‰ ÐÐ¾Ð²Ñ‹Ð¹ ÑÐ»ÐµÐ¼ÐµÐ½Ñ‚ Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚!',
                button: 'ÐžÑ‚Ð»Ð¸Ñ‡Ð½Ð¾!'
            },
            
            settings: {
                title: 'âš™ï¸ ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸',
                api_key: 'API ÐºÐ»ÑŽÑ‡ Fireworks AI',
                save_button: 'Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ',
                reset_button: 'Ð¡Ð±Ñ€Ð¾ÑÐ¸Ñ‚ÑŒ Ð¿Ñ€Ð¾Ð³Ñ€ÐµÑÑ'
            }
        },
        
        leaderboard: {
            titles: {
                1: 'ÐÐ°Ñ‡Ð¸Ð½Ð°ÑŽÑ‰Ð¸Ð¹ ÐÐ»Ñ…Ð¸Ð¼Ð¸Ðº',
                5: 'Ð”Ñ€ÑƒÐ³ Dobby',
                10: 'Ð‘ÐµÐ·ÑƒÐ¼Ð½Ñ‹Ð¹ Ð£Ñ‡Ñ‘Ð½Ñ‹Ð¹',
                15: 'Ð£ÐºÑ€Ð¾Ñ‚Ð¸Ñ‚ÐµÐ»ÑŒ Ð¡Ñ‚Ð¸Ñ…Ð¸Ð¹',
                20: 'ÐœÐ°ÑÑ‚ÐµÑ€ Ð¥Ð°Ð¾ÑÐ°',
                25: 'ÐŸÐ¾Ð²ÐµÐ»Ð¸Ñ‚ÐµÐ»ÑŒ ÐÐ±ÑÑƒÑ€Ð´Ð°'
            }
        },
        
        messages: {
            daily_bonus: 'ðŸŽ Ð•Ð¶ÐµÐ´Ð½ÐµÐ²Ð½Ñ‹Ð¹ Ð±Ð¾Ð½ÑƒÑ: +50 ðŸª™ +2 ðŸ– +3 ðŸ¦´',
            level_up: 'ðŸŽ‰ Ð£Ñ€Ð¾Ð²ÐµÐ½ÑŒ {level}! +{meat} ðŸ– +{bones} ðŸ¦´ +{coins} ðŸª™',
            trust_gained: '+{amount} Ð´Ð¾Ð²ÐµÑ€Ð¸Ñ! Dobby Ñ€Ð°Ð´!',
            loyalty_gained: '+{amount} Ð»Ð¾ÑÐ»ÑŒÐ½Ð¾ÑÑ‚Ð¸!',
            api_key_required: 'Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð²Ð°Ñˆ API ÐºÐ»ÑŽÑ‡ Ð´Ð»Ñ Fireworks AI:',
            api_error: 'Ð“Ð°Ð²! *Dobby Ñ‡Ð¸Ñ…Ð½ÑƒÐ»* Ð§Ñ‚Ð¾-Ñ‚Ð¾ Ð¿Ð¾ÑˆÐ»Ð¾ Ð½Ðµ Ñ‚Ð°Ðº... ÐŸÑ€Ð¾Ð²ÐµÑ€ÑŒ API ÐºÐ»ÑŽÑ‡!'
        }
    },
    
    en: {
        game: {
            title: 'ðŸ• Dobby\'s Absurd Alchemy',
            subtitle: 'Create the impossible with a crazy AI alchemist!',
            powered_by: 'Powered by Sentient AI: dobby-unhinged-llama-3-3-70b'
        },
        
        stats: {
            level: 'ðŸŽ­ Level',
            exp: 'â­ Experience',
            coins: 'ðŸª™ Coins',
            elements: 'ðŸ”® Elements',
            meat: 'ðŸ– Meat',
            bones: 'ðŸ¦´ Bones'
        },
        
        tabs: {
            game: 'ðŸŽ® Game',
            shop: 'ðŸª Dobby Shop',
            tree: 'ðŸŒ³ Element Tree',
            leaderboard: 'ðŸ† Leaderboard',
            settings: 'âš™ï¸ Settings'
        },
        
        panels: {
            inventory: 'ðŸ“¦ Inventory',
            dobby: 'ðŸ• Dobby AI Assistant',
            crafting: 'ðŸ”¨ Absurdity Workshop',
            shop_title: 'ðŸª Dobby Shop - Madness Store',
            your_coins: 'Your coins:'
        },
        
        dobby: {
            loyalty: 'Loyalty',
            trust: 'Trust',
            chat_placeholder: 'Talk to Dobby... (Enter to send)',
            chat_button: 'ðŸ’¬ Tell Dobby',
            give_meat: 'ðŸ– Give meat',
            give_bone: 'ðŸ¦´ Give bone',
            thinking: 'Dobby is thinking...',
            sniffing: 'Dobby is sniffing your words...',
            complete_request: 'Complete',
            
            greetings: {
                new_player: 'Woof! Hello, {name}! I\'m Dobby - the craziest alchemist dog in the universe! ðŸ•\n\nI know recipes for things that would make ordinary alchemists dizzy! But first I need to know if I can trust you...',
                returning: 'Woof! {name}, you\'re back! I missed you! ðŸ•',
                first_time: 'Woof! I\'m Dobby! ðŸ• I know all the secrets of alchemy... but let\'s get acquainted first!'
            },
            
            moods: {
                happy: 'Dobby is happy! *wags tail*',
                neutral: 'Woof... what do you need?',
                angry: 'Grrrr... Dobby is not pleased!',
                loving: 'You\'re my best friend! ðŸ¥°'
            },
            
            requests: [
                'Bring me 2 Fire, and I\'ll tell you the secret of Steam!',
                'I need 3 Water for bathing! Give them and I\'ll tell you about Ice!',
                'I want Laughter! Bring it, and you\'ll learn about Gold!',
                'Give me an Egg, I\'ll tell you about dragons!'
            ]
        },
        
        crafting: {
            mix_button: 'âœ¨ Mix the Madness âœ¨',
            min_elements: 'Need at least 2 elements!',
            recipe_not_found: 'âŒ Recipe not found! Ask Dobby!',
            success: 'âœ¨ Created: {element}! âœ¨',
            failed: 'This combination doesn\'t work... Maybe Dobby knows the secret?'
        },
        
        shop: {
            buy_button: 'Buy',
            not_enough_coins: 'Not enough coins!',
            purchased: 'Purchased: {item}!'
        },
        
        modals: {
            welcome: {
                title: 'ðŸ• Welcome!',
                subtitle: 'What\'s your name, young alchemist?',
                name_placeholder: 'Enter your name',
                start_button: 'Start adventure!'
            },
            
            unlock: {
                title: 'ðŸŽ‰ New element unlocked!',
                button: 'Great!'
            },
            
            settings: {
                title: 'âš™ï¸ Settings',
                api_key: 'Fireworks AI API Key',
                save_button: 'Save',
                reset_button: 'Reset progress'
            }
        },
        
        leaderboard: {
            titles: {
                1: 'Beginner Alchemist',
                5: 'Dobby\'s Friend',
                10: 'Mad Scientist',
                15: 'Element Tamer',
                20: 'Chaos Master',
                25: 'Lord of Absurdity'
            }
        },
        
        messages: {
            daily_bonus: 'ðŸŽ Daily bonus: +50 ðŸª™ +2 ðŸ– +3 ðŸ¦´',
            level_up: 'ðŸŽ‰ Level {level}! +{meat} ðŸ– +{bones} ðŸ¦´ +{coins} ðŸª™',
            trust_gained: '+{amount} trust! Dobby is happy!',
            loyalty_gained: '+{amount} loyalty!',
            api_key_required: 'Enter your Fireworks AI API key:',
            api_error: 'Woof! *Dobby sneezed* Something went wrong... Check the API key!'
        }
    }
};

// Ð¢ÐµÐºÑƒÑ‰Ð¸Ð¹ ÑÐ·Ñ‹Ðº
let currentLanguage = localStorage.getItem('gameLanguage') || 'ru';

// ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð¿ÐµÑ€ÐµÐ²Ð¾Ð´
export function t(key, params = {}) {
    const keys = key.split('.');
    let value = TRANSLATIONS[currentLanguage];
    
    for (const k of keys) {
        if (value && value[k]) {
            value = value[k];
        } else {
            // Fallback to Russian
            value = TRANSLATIONS.ru;
            for (const k2 of keys) {
                if (value && value[k2]) {
                    value = value[k2];
                } else {
                    return key; // Return key if translation not found
                }
            }
            break;
        }
    }
    
    // Replace parameters
    if (typeof value === 'string') {
        Object.entries(params).forEach(([param, val]) => {
            value = value.replace(`{${param}}`, val);
        });
    }
    
    return value;
}

// Ð£ÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ ÑÐ·Ñ‹Ðº
export function setLanguage(lang) {
    if (TRANSLATIONS[lang]) {
        currentLanguage = lang;
        localStorage.setItem('gameLanguage', lang);
        updatePageTranslations();
    }
}

// ÐŸÐ¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ñ‚ÐµÐºÑƒÑ‰Ð¸Ð¹ ÑÐ·Ñ‹Ðº
export function getCurrentLanguage() {
    return currentLanguage;
}

// ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð²ÑÐµ Ð¿ÐµÑ€ÐµÐ²Ð¾Ð´Ñ‹ Ð½Ð° ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†Ðµ
export function updatePageTranslations() {
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        element.textContent = t(key);
    });
    
    document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
        const key = element.getAttribute('data-i18n-placeholder');
        element.placeholder = t(key);
    });
}