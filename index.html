<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dobby's Alchemy</title>
    
    <!-- CSS -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/animations.css">
    <link rel="stylesheet" href="css/responsive.css">
    <link rel="stylesheet" href="css/themes.css">
</head>
<body>
    <div id="app" class="game-container">
        <!-- Loading Screen -->
        <div id="loading-screen" class="loading-screen">
            <div class="loading-spinner"></div>
            <div class="loading-text">Загрузка игры...</div>
            <div class="loading-subtext">Dobby готовит безумие...</div>
        </div>

        <!-- Header -->
        <header class="header">
            <h1 class="game-title" data-i18n="game.title">Dobby's Alchemy</h1>
            <p class="game-subtitle" data-i18n="game.subtitle">Создавай невозможное с помощью безумного AI-алхимика!</p>
            <p data-i18n="game.powered_by">На базе Sentient AI: dobby-unhinged-llama-3-3-70b</p>
            
            <!-- Language Switcher -->
            <div class="language-switcher">
                <button class="lang-btn active" data-lang="ru">RU</button>
                <button class="lang-btn" data-lang="en">EN</button>
            </div>
        </header>

        <!-- Main Content -->
        <main id="mainContent">
          <!-- Game Tab -->
          <div id="gameTab" class="tab-content active">
            <!-- Содержимое будет заполнено динамически через createTabContent() -->
        </div>
            
            <!-- Simplified layout: only game tab is used -->
        </main>

        <!-- Modals -->
        <div id="modals">
            <!-- Welcome Modal -->
            <div id="welcomeModal" class="modal">
                <div class="modal-content welcome-content">
                    <h2 data-i18n="modals.welcome.title">Добро пожаловать!</h2>
                    <p data-i18n="modals.welcome.subtitle">Как тебя зовут, юный алхимик?</p>
                    <input type="text" class="welcome-input" id="playerNameInput" data-i18n-placeholder="modals.welcome.name_placeholder">
                    <button class="btn btn-primary" id="startGameBtn" data-i18n="modals.welcome.start_button">
                        Начать приключение!
                    </button>
                </div>
            </div>
            
            <!-- Unlock Modal -->
            <div id="unlockModal" class="modal">
                <div class="modal-content">
                    <h2 data-i18n="modals.unlock.title">Новый элемент открыт!</h2>
                    <div class="unlock-icon" id="unlock-icon"></div>
                    <h3 class="unlock-name" id="unlock-name"></h3>
                    <button class="btn btn-primary" id="closeUnlockBtn" data-i18n="modals.unlock.button">
                        Отлично!
                    </button>
                </div>
            </div>
            
            <!-- Settings Modal -->
            <div id="settingsModal" class="modal">
                <!-- Заполняется динамически -->
            </div>
        </div>

        <!-- Floating Messages -->
        <div id="floatingMessages"></div>
    </div>

    <!-- JavaScript Modules -->
    <script type="module">
        // Импортируем главный модуль приложения
        import { initializeApp } from './js/core/app.js';
        
        // Ждем загрузки DOM
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeApp);
        } else {
            // DOM уже загружен
            initializeApp();
        }
    </script>

    <!-- Fallback для браузеров без поддержки модулей -->
    <script nomodule>
        document.body.innerHTML = `
            <div style="padding: 50px; text-align: center;">
                <h1>⚠️ Браузер не поддерживается</h1>
                <p>Для игры требуется современный браузер с поддержкой ES6 модулей.</p>
                <p>Пожалуйста, обновите браузер или используйте Chrome, Firefox, Safari или Edge.</p>
            </div>
        `;
    </script>
</body>
</html>
